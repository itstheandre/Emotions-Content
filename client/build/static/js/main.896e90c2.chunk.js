(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{106:function(e,t,a){e.exports=a.p+"static/media/motus-logo2.27c4d86a.png"},113:function(e,t,a){e.exports=a(252)},118:function(e,t,a){},154:function(e,t){},155:function(e,t){},156:function(e,t){},252:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(34),c=a.n(l),s=(a(118),a(15)),o=a(16),i=a(18),u=a(17),m=a(19),d=(a(37),a(8)),p=a(6),h=a.n(p),g=a(106),f=a.n(g),b=function(e){h.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data})).then((function(){e.setUser(null)}))},E=function(e){return r.a.createElement("nav",{className:" sticky-top navbar navbar-expand-lg navbar-dark default-color"},r.a.createElement(d.b,{className:"navbar-brand",to:"/"},r.a.createElement("img",{src:f.a,style:{height:"30px"}})),e.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{className:"navbar-brand",to:"/content-dashboard"},"Content"),r.a.createElement(d.b,{className:"navbar-brand",to:"/chart"},"Analytics"),r.a.createElement(d.b,{className:"navbar-brand my-2 my-lg-0 ml-auto",to:"/",onClick:function(){return b(e)}},r.a.createElement("i",{className:"fas fa-sign-out-alt"}))," "):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{className:"navbar-brand my-2 my-lg-0 ml-auto",to:"/signup"},"Signup"),r.a.createElement(d.b,{className:"navbar-brand my-2 my-lg-0 ml-auto",to:"/login"},r.a.createElement("i",{className:"fas fa-sign-in-alt"}))),e.user&&r.a.createElement("h3",{className:"heyUser my-2 my-lg-0 ml-auto"},"Hey ",e.user.fullName),e.user&&r.a.createElement(d.b,{style:{marginTop:"5px"},to:"/settings"},r.a.createElement("i",{className:"fas fa-user-edit white-text"})))},v=a(4),y=a(5),O=function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),o=Object(v.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(v.a)(m,2),p=d[0],g=d[1],f=Object(n.useState)(""),b=Object(v.a)(f,2),E=b[0],O=b[1];console.log(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.c,null,r.a.createElement(y.e,null,r.a.createElement(y.b,null,r.a.createElement("h1",{className:"text-center mb-4 logIn"},"Sign up"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),function(e,t,a){return h.a.post("/api/auth/signup",{username:e,password:t,fullName:a}).then((function(e){return console.log("Response: I copied from Montasar:",e.data),e.data})).catch((function(e){return e.response.data}))}(l,i,E).then((function(t){t.message?g(t.message):(e.setUser(t),e.history.push("/content-dashboard"))}))}},r.a.createElement("div",{className:"grey-text"},r.a.createElement(y.d,{label:"username",validate:!0,group:!0,error:"wrong",success:"right",type:"text",name:"username",id:"username",value:l,onChange:function(e){return c(e.target.value)}}),r.a.createElement(y.d,{label:"name",validate:!0,group:!0,error:"wrong",success:"right",type:"text",name:"fullName",id:"fullName",value:E,onChange:function(e){return O(e.target.value)}}),r.a.createElement(y.d,{label:"password",validate:!0,group:!0,error:"wrong",success:"right",type:"password",name:"password",id:"password",value:i,onChange:function(e){return u(e.target.value)}})),p&&r.a.createElement("h1",null,p),r.a.createElement("div",{className:"text-center"},r.a.createElement(y.a,{type:"submit"},"Create Account")))))))},x=a(31),j=function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),o=Object(v.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(v.a)(m,2),p=d[0],g=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.c,null,r.a.createElement(y.e,null,r.a.createElement(y.b,null,r.a.createElement("h1",{className:" text-center mb-4 logIn"},"Log in"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),function(e,t){return h.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))}(l,i).then((function(t){t.message?g(t.message):(e.setUser(t),e.history.push("/content-dashboard"))}))}},r.a.createElement("div",{className:"grey-text"},r.a.createElement(y.d,{label:"username",validate:!0,group:!0,error:"wrong",success:"right",type:"text",name:"username",id:"username",value:l,onChange:function(e){return c(e.target.value)}}),r.a.createElement(y.d,{label:"password",validate:!0,group:!0,error:"wrong",success:"right",type:"password",name:"password",id:"password",value:i,onChange:function(e){return u(e.target.value)}})),p&&r.a.createElement("h1",null,p),r.a.createElement("div",{className:"text-center"},r.a.createElement(y.a,{type:"submit"},"Login")))))))},w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={textToCopy:"",message:""},a.anotherPage=function(){navigator.clipboard.writeText(a.state.textToCopy),a.setState({message:"Your link has been added to the clipboad"}),a.timeOut()},a.timeOut=function(){setTimeout((function(){a.setState({message:""})}),1e3)},a.componentDidMount=function(){var e=a.props.content._id,t=a.props.user.username;a.setState({textToCopy:"https://motus-app.herokuapp.com/u/".concat(t,"/").concat(e)})},a.handleClick=function(e){return e.preventDefault(),h.a.delete("/api/content/".concat(a.props.content._id)).then((function(e){a.props.getData()}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"borderCard"},r.a.createElement("div",{className:"contentCard"},r.a.createElement("h2",null,this.props.content.title),r.a.createElement("h4",null,this.props.content.date),r.a.createElement("h3",null,this.props.content.contentType),r.a.createElement(d.b,{style:{textDecoration:"none",color:"black"},to:"/content-dashboard/".concat(this.props.content._id)},r.a.createElement("i",{className:"fas fa-lg fa-eye"})),r.a.createElement(d.b,{style:{textDecoration:"none",color:"black"},to:"/edit/".concat(this.props.content._id)},r.a.createElement("i",{className:"fas fa-lg fa-edit"})),r.a.createElement("i",{className:"fas fa-lg fa-trash-alt",onClick:this.handleClick,style:{cursor:"pointer"}}),r.a.createElement("i",{className:"far fa-lg fa-share-square",onClick:this.anotherPage,style:{cursor:"pointer"}}),r.a.createElement("p",{style:{textAlign:"center"}},this.state.message),r.a.createElement(d.b,{to:"/u/".concat(this.props.user.username,"/").concat(this.props.content._id)}," ","View as Normal")),r.a.createElement("hr",{width:"80%"}))}}]),t}(n.Component),N=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user,content:[],textToCopy:"",message:""},a.componentDidMount=function(){a.getData()},a.getData=function(){h.a.get("/api/content").then((function(e){a.setState({content:e.data.reverse()})}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=0!==t.content.length&&"Not empty";return a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"},className:"logIn h3"},"My Content Dashboard"),r.a.createElement("br",null),!n&&r.a.createElement("div",null," "),this.state.content.map((function(t){return r.a.createElement("div",{className:"text-center dashCard",key:t._id},r.a.createElement(w,{content:t,getData:e.getData,key:t._id,user:e.state.user}))}))),r.a.createElement("div",{className:"fixed-bottom addBtn"},r.a.createElement(d.b,{to:"/content-dashboard/add"},r.a.createElement("i",{className:"fas fa-3x fa-plus-circle text-default"})))):r.a.createElement("h1",null,"You are not logged in, so no dashboard for you")}}]),t}(n.Component),S=function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),o=Object(v.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)("image"),d=Object(v.a)(m,2),p=d[0],g=d[1],f=Object(n.useState)(!1),b=Object(v.a)(f,2),E=b[0],O=b[1],x=Object(n.useState)(""),j=Object(v.a)(x,2),w=j[0],N=j[1],S=Object(n.useState)(""),A=Object(v.a)(S,2),C=A[0],V=A[1],D=E?"multipart/form-data":"",P="image"===p,M="audio"===p,T="video"===p,k="text"===p;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.c,null,r.a.createElement(y.e,null,r.a.createElement(y.b,null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),l&&i&&p&&w?(console.log(l),h.a.post("/api/content/add",{urlPath:l,title:i,contentType:p,body:w}).then((function(){e.history.push("/content-dashboard")}))):V("Please fill out the whole form")},encType:D},r.a.createElement("label",{className:"text-default logIn",htmlFor:"title"},"Title"),r.a.createElement(y.d,{label:"",type:"text",name:"title",id:"title",value:i,onChange:function(e){return u(e.target.value)}}),r.a.createElement("label",{className:"text-default logIn",htmlFor:"contentType"},"Content Type"),r.a.createElement("select",{className:"browser-default custom-select",id:"contentType",name:"contentType",value:p,onChange:function(e){console.log("Option selected:",e.target.value);var t=e.target.value;console.log(typeof t,t===e.target.value),"text"===t?(g(t),V("Adding text will be added later. Stay tuned!")):"video"!==t?(g(t),O(!0)):(g(t),V(""))}},r.a.createElement("option",{value:"image"},"Image"),r.a.createElement("option",{value:"text"},"Text"),r.a.createElement("option",{value:"audio"},"Audio"),r.a.createElement("option",{value:"video"},"Video")),P&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("label",{className:"text-default logIn",htmlFor:"file"},"Upload your image"),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",name:"urlPath",id:"urlPath",onChange:function(e){console.log("the file to be added is",e.target.files[0]);var t=e.target.files[0],a=new FormData;a.append("urlPath",t),h.a.post("/api/content/add/image",a).then((function(e){var t=e.data.secure_url;c(t)}))},className:"custom-file-input","aria-describedby":"inputGroupFileAddon01"}),r.a.createElement("label",{className:"custom-file-label grey-text",htmlFor:"file"},"choose file"))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("img",{style:{height:"100px",textAlign:"center"},src:l}))),r.a.createElement("br",null)),M&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"text-default logIn",htmlFor:"file"},"Upload your audio"),r.a.createElement(y.d,{type:"file",name:"urlPath",id:"urlPath",onChange:function(e){console.log("the file to be added is",e.target.files[0]);var t=e.target.files[0],a=new FormData;a.append("urlPath",t),h.a.post("/api/content/add/audio",a).then((function(e){var t=e.data.secure_url;c(t)}))}})),T&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"file"},"Paste your Youtube Link"),r.a.createElement(y.d,{type:"text",name:"urlPath",id:"urlPath",onChange:function(e){return c(e.target.value)},value:l})),k&&r.a.createElement("div",null,C),r.a.createElement("label",{htmlFor:"body"},"Add a description"),r.a.createElement(y.d,{name:"body",id:"body",type:"text",value:w,onChange:function(e){return N(e.target.value)}}),!k&&r.a.createElement("div",{className:"text-center"},r.a.createElement(y.a,{type:"submit"},"Upload")),C)))))},A=a(50),C=a.n(A),V=a(51),D=a.n(V),P=function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),o=Object(v.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(v.a)(m,2),p=(d[0],d[1]),g=Object(n.useState)(""),f=Object(v.a)(g,2),b=f[0],E=f[1],y=Object(n.useState)(""),O=Object(v.a)(y,2),x=O[0],j=O[1],w=Object(n.useState)(""),N=Object(v.a)(w,2),S=N[0],A=N[1],V=Object(n.useState)(""),P=Object(v.a)(V,2),M=P[0],T=P[1];Object(n.useEffect)((function(){var t=e.match.params.unique;h.a.get("/api/content/".concat(t)).then((function(e){console.log("HEER",e.data);var t=e.data,a=t.title,n=t.body,r=t.urlPath,l=t.contentType,s=t._id,o=t.owner.username,i=t.owner.fullName;c(a),u(n),T(r),A(l),p(i),E("https://motus-app.herokuapp.com//u/".concat(o,"/").concat(s))}))}),[]);var k="video"===S,F="audio"===S,I="image"===S;return console.log(M),r.a.createElement("div",null,r.a.createElement("i",{className:"fas fa-3x fa-angle-left",onClick:function(){return e.history.goBack()}}),r.a.createElement("div",{className:"motusHeader"},r.a.createElement("h1",null,l),I&&r.a.createElement("img",{src:M,style:{width:"100%"}}),k&&r.a.createElement("div",{className:"videoPlayer"},r.a.createElement("div",{className:"embed-responsive"},r.a.createElement(C.a,{url:M,controls:!0}))),F&&r.a.createElement(D.a,{src:M,controls:!0}),r.a.createElement("p",null,i),r.a.createElement("i",{className:"fas fa-2x fa-share-square",style:{cursor:"pointer"},onClick:function(){navigator.clipboard.writeText(b),j("Your link has been copied to the cliboard"),setTimeout((function(){j("")}),2e3)}}),r.a.createElement("p",null,x)))},M=function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),o=Object(v.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(v.a)(m,2),p=d[0],g=d[1];return Object(n.useEffect)((function(){var t=e.match.params.editPost;h.a.get("/api/content/".concat(t)).then((function(e){var t=e.data._id,a=e.data,n=a.title,r=a.body;c(n),u(r),g(t)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.c,null,r.a.createElement(y.e,null,r.a.createElement(y.b,null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),h.a.put("/api/content/".concat(p),{title:l,body:i}).then((function(){e.history.push("/content-dashboard")}))}},r.a.createElement("div",{className:"text-default"},r.a.createElement("label",{className:"text-default logIn",htmlFor:"title"},"Title"),r.a.createElement(y.d,{type:"text",id:"title",name:"title",value:l,onChange:function(e){return c(e.target.value)}}),r.a.createElement("label",{className:"text-default",htmlFor:"body"},"Description"),r.a.createElement(y.d,{type:"text",id:"body",name:"body",value:i,onChange:function(e){return u(e.target.value)}}),r.a.createElement("div",{className:"text-center"},r.a.createElement(y.a,{type:"submit"},"Save"))))))))},T=a(42),k=a.n(T),F=a(72),I=a(24),U=a(23),H=a(111),_=function(e){if(0===e.length)return 0;e.sort((function(e,t){return e-t}));var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2},B=null,R=null;"undefined"!==typeof document.hidden?(B="hidden",R="visibilitychange"):"undefined"!==typeof document.msHidden?(B="msHidden",R="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(B="webkitHidden",R="webkitvisibilitychange");var L=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={actions:[]},a.handleVisibilityChange=function(){document[B]?a.setState({actions:[].concat(Object(I.a)(a.state.actions),["hide"])}):a.setState({actions:[].concat(Object(I.a)(a.state.actions),["show"])})},a.dataManager=function(){clearInterval(a.myDetection),a.webcam();var e=a.MaxAndAvg(),t=a.timeSessionCalculation(),n={angry:[e.angryMaxValue,e.angryAvgValue],disgusted:[e.disgustedMaxValue,e.disgustedAvgValue],fearful:[e.fearfulMaxValue,e.fearfulAvgValue],happy:[e.happyMaxValue,e.happyAvgValue],neutral:[e.neutralMaxValue,e.neutralAvgValue],sad:[e.sadMaxValue,e.sadAvgValue],surprised:[e.surprisedMaxValue,e.surprisedAvgValue],age:Math.ceil(e.age),gender:e.gender,time:{fullTime:e.time,min:t.min,sec:t.sec}};console.log("FaceDetectionOBJ------",n),console.log("STATE AFTER UNMOUNT-------",e),e.angryMaxValue===-1/0?(console.log("-infinity"),n.angry[0]=0,n.disgusted[0]=0,n.fearful[0]=0,n.happy[0]=0,n.neutral[0]=0,n.sad[0]=0,n.surprised[0]=0,n.age=25,console.log(n),h.a.put("/api/views/".concat(a.props.id),n).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))):h.a.put("/api/views/".concat(a.props.id),n).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},a.timeElapsed=[],a.timeSession=function(){var e,t=(new Date).toString().split(" "),n=t[2],r=t[1],l=t[3],c=t[4].toString().split(""),s=c[0]+c[1],o=c[3]+c[4],i=c[6]+c[7];return e="".concat(n," ").concat(r," ").concat(l," ").concat(s,":").concat(o,":").concat(i),a.timeElapsed.push(e)},a.timeSessionCalculation=function(){var e=parseInt(a.timeElapsed[0].split(" ")[3].split(":")[1]),t=parseInt(a.timeElapsed[0].split(" ")[3].split(":")[2]),n=parseInt(a.timeElapsed[1].split(" ")[3].split(":")[1]),r=parseInt(a.timeElapsed[1].split(" ")[3].split(":")[2]);return{min:n-e,sec:n-e>0?60-t+r:r-t}},a.angryValues=[],a.disgustedValues=[],a.fearfulValues=[],a.happyValues=[],a.neutralValues=[],a.sadValues=[],a.surprisedValues=[],a.ageValues=[],a.genderValues=[],a.maleCount=0,a.femaleCount=0,a.exactGender=function(e){return e&&e.forEach((function(e){"male"===e?a.maleCount++:"female"===e&&a.femaleCount++})),a.maleCount>a.femaleCount?"male":a.femaleCount>a.maleCount?"female":""},a.MaxAndAvg=function(){return{angryMaxValue:Math.max.apply(Math,Object(I.a)(a.angryValues)),disgustedMaxValue:Math.max.apply(Math,Object(I.a)(a.disgustedValues)),fearfulMaxValue:Math.max.apply(Math,Object(I.a)(a.fearfulValues)),happyMaxValue:Math.max.apply(Math,Object(I.a)(a.happyValues)),neutralMaxValue:Math.max.apply(Math,Object(I.a)(a.neutralValues)),sadMaxValue:Math.max.apply(Math,Object(I.a)(a.sadValues)),surprisedMaxValue:Math.max.apply(Math,Object(I.a)(a.surprisedValues)),angryAvgValue:_(a.angryValues),disgustedAvgValue:_(a.disgustedValues),fearfulAvgValue:_(a.fearfulValues),happyAvgValue:_(a.happyValues),neutralAvgValue:_(a.neutralValues),sadAvgValue:_(a.sadValues),surprisedAvgValue:_(a.surprisedValues),age:_(a.ageValues),ageArray:a.ageValues,gender:a.exactGender(a.genderValues),genderArray:a.genderValues,maleNum:a.maleCount,femaleNum:a.femaleCount,time:a.timeElapsed}},a.myDetection=0,a.webcam=function(){var e=document.getElementById("video");navigator.getUserMedia({video:{}},(function(t){return e.srcObject=t.getVideoTracks().forEach((function(e){return e.stop()}))}),(function(e){return console.error(e)}))},a.faceApi=function(){var e=document.getElementById("video");Promise.all([U.e.tinyFaceDetector.loadFromUri("/assets"),U.e.faceLandmark68Net.loadFromUri("/assets"),U.e.faceRecognitionNet.loadFromUri("/assets"),U.e.faceExpressionNet.loadFromUri("/assets"),U.e.ageGenderNet.loadFromUri("/assets")]).then((function(){navigator.getUserMedia({video:{}},(function(t){return e.srcObject=t}),(function(e){return console.error(e)}))})),e.addEventListener("play",Object(F.a)(k.a.mark((function t(){var n,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.b(e);case 2:return n=t.sent,document.body.append(n),r={width:e.width,height:e.height},t.next=7,U.d(n,r);case 7:console.log("WEBCAM LOADED"),a.myDetection=setInterval(Object(F.a)(k.a.mark((function t(){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.c(e,new U.a).withFaceLandmarks().withFaceExpressions().withAgeAndGender().withFaceDescriptors();case 2:void 0===(n=t.sent)[0]?console.log("DETECTION FAILED... "):n[0].expressions&&(console.log("STORING EMOTIONS..."),n[0].expressions.angry&&a.angryValues.push(n[0].expressions.angry),n[0].expressions.disgusted&&a.disgustedValues.push(n[0].expressions.disgusted),n[0].expressions.fearful&&a.fearfulValues.push(n[0].expressions.fearful),n[0].expressions.happy&&a.happyValues.push(n[0].expressions.happy),n[0].expressions.neutral&&a.neutralValues.push(n[0].expressions.neutral),n[0].expressions.sad&&a.sadValues.push(n[0].expressions.sad),n[0].expressions.surprised&&a.surprisedValues.push(n[0].expressions.surprised),a.ageValues.push(n[0].age),a.genderValues.push(n[0].gender));case 4:case"end":return t.stop()}}),t)}))),100);case 9:case"end":return t.stop()}}),t)}))))},a.componentDidMount=function(){a.timeSession(),a.faceApi(),document.addEventListener(R,a.handleVisibilityChange,!1)},a.componentWillUnmount=function(){document.removeEventListener(R,a.handleVisibilityChange),a.timeSession(),a.timeSessionCalculation(),a.dataManager()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return"hide"===this.state.actions[this.state.actions.length-1]?(console.log("TAB FOCUS IS HIDDEN"),this.timeSession(),this.timeSessionCalculation(),this.dataManager()):"show"===this.state.actions[this.state.actions.length-1]&&(this.timeElapsed=[],this.timeSession(),this.faceApi()),r.a.createElement("div",{className:"faceApi"},r.a.createElement(H.Beforeunload,{onBeforeunload:function(){return console.log("DISPLAY PROPS: ----",e.props),e.timeSession(),e.timeSessionCalculation(),e.dataManager(),!1}}),r.a.createElement("video",{id:"video",width:"720",height:"560",autoPlay:!0,muted:!0}))}}]),t}(n.Component),Y=function(e){console.log(e);var t="video"===e.contentType,a="audio"===e.contentType,n="image"===e.contentType;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"motusHeader"},r.a.createElement("h1",{className:"h1"},e.title),r.a.createElement(d.b,{to:"/u/".concat(e.owner)},e.owner),n&&r.a.createElement("img",{className:"",src:e.urlPath,style:{width:"100%"}}),t&&r.a.createElement("div",{className:"videoPlayer"},r.a.createElement("div",{className:"embed-responsive"},r.a.createElement(C.a,{url:e.urlPath,controls:!0}))),a&&r.a.createElement("div",{className:"motusHeader"},r.a.createElement(D.a,{src:e.urlPath,controls:!0})),r.a.createElement("br",null),r.a.createElement("h5",{className:"h5"},"Description"),r.a.createElement("p",null,e.body),r.a.createElement("br",null),r.a.createElement("h5",{className:"h5"},e.viewTotal," views"),r.a.createElement("br",null)),r.a.createElement(L,{id:e.viewId}))},G=function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),o=Object(v.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(v.a)(m,2),p=d[0],g=d[1],f=Object(n.useState)(""),b=Object(v.a)(f,2),E=b[0],y=b[1],O=Object(n.useState)(""),x=Object(v.a)(O,2),j=x[0],w=x[1],N=Object(n.useState)(""),S=Object(v.a)(N,2),A=S[0],C=S[1],V=Object(n.useState)(0),D=Object(v.a)(V,2),P=D[0],M=D[1],T=Object(n.useState)(""),k=Object(v.a)(T,2),F=k[0],I=k[1],U=Object(n.useState)(""),H=Object(v.a)(U,2),_=H[0],B=H[1];Object(n.useEffect)((function(){var t=e.match.params.user,a=e.match.params.id;h.a.get("/u/api/".concat(t,"/").concat(a)).then((function(e){var t=e.data._id,a=e.data.owner.username,n=e.data.owner._id,r=e.data.views.length,l=e.data,s=l.title,o=l.body,i=l.contentType,m=l.urlPath;h.a.post("/api/views/".concat(t)).then((function(e){var l=e.data._id;u(o),c(s),y(a),w(n),C(l),g(t),M(r),B(i),I(m)}))}))}),[]);var R={title:l,body:i,contentId:p,owner:E,ownerId:j,viewId:A,viewTotal:P,contentType:_,urlPath:F};return r.a.createElement("div",null,r.a.createElement(Y,R))},W=function(e){return console.log(e),r.a.createElement("div",{className:"text-center dashCard"},r.a.createElement("div",{className:"contentCard"},r.a.createElement("h2",null,e.content.title),r.a.createElement("h4",null,e.content.date),r.a.createElement("h3",null,e.content.contentType),r.a.createElement(d.b,{style:{textDecoration:"none",color:"black"},to:"/u/".concat(e.user,"/").concat(e.content._id)},r.a.createElement("i",{className:"fas fa-lg fa-eye"})),r.a.createElement("hr",{style:{width:"60%"}})))},q=function(e){var t=Object(n.useState)([]),a=Object(v.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),o=Object(v.a)(s,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){var t=e.match.params.user;h.a.get("/u/api/".concat(t)).then((function(e){var a=e.data;c(a),u(t)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h2",{style:{textAlign:"center"},className:"logIn h3"},"My Content Dashboard"),r.a.createElement("br",null),l.reverse().map((function(e){return r.a.createElement(W,{content:e,key:e._id,user:i})}))))},J=a(41),Z=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={avgChartData:{},maxChartData:{},emotionalImpact:0,malePercent:0,femalePercent:0,age:0,views:0,content:[],time:""},a.componentDidMount=function(){a.getData(a.props.content.views)},a.getData=function(e){if(e.length){var t=function(e){return l.reduce((function(t,a){return a&&a[e]&&t++,t}),0)},n=function(e){return e.reduce((function(e,t){return t+e}))/e.length},r=function(e){var t=c.map((function(t){return t[e]}));return n(t)};console.log("ARRAY OF VIEWS???",e);var l=e.map((function(e){return e.averageEmotion})),c=e.map((function(e){return e.maxEmotion})),s=[];e.forEach((function(e){s.push(60*e.time.min),s.push(e.time.sec)}));var o=function(e){var t=~~(e/3600),a=~~(e%3600/60),n=e%60,r="";return t>0&&(r+=t+":"+(a<10?"0":"")),r+=a+":"+(n<10?"0":""),(r+=""+n)+" min"}(Math.round(n(s))),i=[];l.forEach((function(e){i.push(e.neutralAvg)}));var u=(100-n(i)).toFixed(2);console.log("Emo ",u);var m=[];e.forEach((function(e){m.push(e.age)}));var d=Math.floor(n(m));console.log("Age ",d);var p=[];e.forEach((function(e){e.gender&&p.push(e.gender)}));var h=p.filter((function(e){if("male"===e)return e})),g=p.length?(h.length/p.length*100).toFixed(2):0,f=p.length?((p.length-h.length)/p.length*100).toFixed(2):0,b=e.length,E={angry:t("angryAvg"),disgusted:t("disgustedAvg"),fearful:t("fearfulAvg"),happy:t("happyAvg"),sad:t("sadAvg"),surprised:t("surprisedAvg")},v={labels:["Angry","Disgusted","Fearful","Happy","Sad","Surprised"],datasets:[{label:"Emotions detected",data:[E.angry,E.disgusted,E.fearful,E.happy,E.sad,E.surprised],backgroundColor:["rgba(255, 95, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)","rgba(255, 99, 132, 0.6)"]}]},y={labels:["Angry","Disgusted","Fearful","Happy","Sad","Surprised"],datasets:[{label:"Max emotion by %",data:[100*r("angryMax"),100*r("disgustedMax"),100*r("fearfulMax"),100*r("happyMax"),100*r("sadMax"),100*r("surprisedMax")],backgroundColor:["rgba(255, 95, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)","rgba(255, 99, 132, 0.6)"]}]};a.setState({avgChartData:v,maxChartData:y,age:d,femalePercent:f,malePercent:g,emotionalImpact:u,views:b,time:o})}},a.setNewData=function(e){a.props.updateState(e,a.state.emotionalImpact,a.state.malePercent,a.state.femalePercent,a.state.age,a.state.views,a.props.content.title,a.state.time)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"headingTable"},r.a.createElement("div",{style:{width:"100px"},className:"h5 text-center"},r.a.createElement("h5",null,this.props.content.title," ")),r.a.createElement("div",{style:{width:"100px"},className:"h5 text-center"},r.a.createElement("h5",null,this.props.content.contentType," ")),r.a.createElement("div",{style:{width:"100px"},className:"h5 text-center"},r.a.createElement("h5",null,this.props.content.views.length," ")),r.a.createElement("div",{style:{width:"100px"},className:"h5 text-center"},r.a.createElement("h5",null,this.props.content.date)),r.a.createElement("div",{style:{width:"100px"},className:"h5 text-center"},r.a.createElement("i",{className:"fas fa-eye",style:{cursor:"pointer"},onClick:function(){return e.setNewData(e.state.avgChartData)}})),r.a.createElement("div",{style:{width:"85px"},className:"h5 text-center"},r.a.createElement("i",{className:"fas fa-eye",style:{cursor:"pointer"},onClick:function(){return e.setNewData(e.state.maxChartData)}})))}}]),t}(n.Component),z=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={chartData:{},emotionalImpact:0,malePercent:0,femalePercent:0,age:0,views:0,content:[],viewsArr:[],title:"",time:""},a.componentDidMount=function(){var e=a.props.user.username;h.a.get("/api/chart/all/".concat(e)).then((function(e){console.log(e);var t=e.data,n=[];e.data.map((function(e){return e.views})).forEach((function(e){e.forEach((function(e){n.push(e)}))})),a.getData(n),a.setState({content:t.reverse(),viewsArr:n})}))},a.getData=function(e){if(e.length){var t=function(e){return n.reduce((function(t,a){return a&&a[e]&&t++,t}),0)},n=e.map((function(e){return e.averageEmotion})),r=(e.map((function(e){return e.maxEmotion})),function(e){return e.reduce((function(e,t){return t+e}))/e.length}),l=[];n.forEach((function(e){l.push(e.neutralAvg)}));var c=(100-r(l)).toFixed(2),s=[];e.forEach((function(e){s.push(e.age)}));var o=[];e.forEach((function(e){o.push(60*e.time.min),o.push(e.time.sec)}));var i=function(e){var t=~~(e/3600),a=~~(e%3600/60),n=e%60,r="";return t>0&&(r+=t+":"+(a<10?"0":"")),r+=a+":"+(n<10?"0":""),(r+=""+n)+" min"}(Math.round(r(o))),u=Math.floor(r(s)),m=[];e.forEach((function(e){e.gender&&m.push(e.gender)})),console.log(m);var d=m.filter((function(e){if("male"===e)return e})),p=m.length?(d.length/m.length*100).toFixed(2):0,h=m.length?((m.length-d.length)/m.length*100).toFixed(2):0,g=e.length,f={angry:t("angryAvg"),disgusted:t("disgustedAvg"),fearful:t("fearfulAvg"),happy:t("happyAvg"),sad:t("sadAvg"),surprised:t("surprisedAvg")},b={labels:["Angry","Disgusted","Fearful","Happy","Sad","Surprised"],datasets:[{label:"Emotions detected",data:[f.angry,f.disgusted,f.fearful,f.happy,f.sad,f.surprised],backgroundColor:["rgba(255, 95, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)","rgba(255, 99, 132, 0.6)"]}]};a.updateState(b,c,p,h,u,g,"All",i)}},a.updateState=function(e,t,n,r,l,c){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"All",o=arguments.length>7?arguments[7]:void 0;a.setState({chartData:e,age:l,femalePercent:r,malePercent:n,emotionalImpact:t,views:c,title:s,time:o})},a.resetData=function(){a.setState({title:"All"}),a.getData(a.state.viewsArr)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t={labels:["Male","Female"],datasets:[{data:[this.state.malePercent,this.state.femalePercent],backgroundColor:["#36A2EB","#ff8173"],hoverBackgroundColor:["#36A2EB","#ff8173"]}]},a={labels:["No","Yes"],datasets:[{data:[100-this.state.emotionalImpact,this.state.emotionalImpact],backgroundColor:["#cfcfcf","#000000"],hoverBackgroundColor:["#cfcfcf","#000000"]}]};return console.log("look",this.state.title),r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),!this.state.title&&r.a.createElement("h1",{style:{textAlign:"center"}},"Try sharing your content with more people. We still need to check more analytics"),r.a.createElement("h1",{style:{textAlign:"center"},className:"h1"},this.state.title),this.state.content.length&&r.a.createElement("div",null,r.a.createElement("div",{className:"chart"},r.a.createElement(J.a,{data:this.state.chartData,options:{maintainAspectRatio:!1}})),r.a.createElement("hr",{width:"80%"}),r.a.createElement("div",{className:"displayPie"},r.a.createElement("div",{className:"doughnut"},r.a.createElement("h5",{className:"h5",style:{textAlign:"center"}},"Gender"),r.a.createElement(J.b,{data:t,options:{maintainAspectRatio:!0}})),r.a.createElement("div",{className:"doughnut"},r.a.createElement("h5",{className:"h5",style:{textAlign:"center"}},"Emotional Impact"),r.a.createElement(J.b,{data:a,options:{maintainAspectRatio:!0}}))),r.a.createElement("hr",{width:"80%"}),r.a.createElement("div",{className:"textChart"},r.a.createElement("div",null,r.a.createElement("h5",{className:"h5"},"Views"),r.a.createElement("p",null,this.state.views)),r.a.createElement("div",null,r.a.createElement("h5",{className:"h5"},"Time spent"),r.a.createElement("p",null,this.state.time))),r.a.createElement("hr",{width:"80%"}),r.a.createElement("div",{style:{textAlign:"center",marginRight:"5%"}},r.a.createElement(y.a,{onClick:function(){return e.resetData()}},"Show all Data")),r.a.createElement("hr",{width:"95%"}),r.a.createElement("div",{className:"headingTable"},r.a.createElement("h5",{style:{width:"100px"},className:"h5 text-center"},"Title"),r.a.createElement("h5",{style:{width:"100px"},className:"h5 text-center"},"Type"),r.a.createElement("h5",{style:{width:"100px"},className:"h5 text-center"},"Views"),r.a.createElement("h5",{style:{width:"100px"},className:"h5 text-center"},"Created"),r.a.createElement("h5",{style:{width:"100px"},className:"h5 text-center"},"Overview"),r.a.createElement("h5",{style:{width:"100px"},className:"h5 text-center"},"Peaks")),this.state.content.map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{updateState:e.updateState,content:t}))}))))}}]),t}(n.Component),K=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"motusHeader logIn",src:"motus-header.png"}),r.a.createElement("iframe",{style:{pointerEvents:"none"},src:"https://giphy.com/embed/KD1vTHZYe5l8TcPZHo",width:"480",height:"300",frameBorder:"0",className:" motusHeader giphy-embed",allowFullScreen:!0}),r.a.createElement("p",{style:{fontSize:"2rem",color:"darkgrey",lineHeight:"0.9"},className:"motusHeader"},"the app that makes analytics of a content in terms of user's emotions, age, gender and time spent on a page"))},$=a(32);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach((function(t){Object($.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee=function(e){var t=e.setUser,a=e.handleSubmit,n=(e.onImageUpload,e.user);return r.a.createElement(y.c,null,r.a.createElement(y.e,null,r.a.createElement(y.b,null,r.a.createElement("form",{onSubmit:a,encType:"multipart/form-data"},r.a.createElement(y.d,{label:"name",type:"text",name:"fullName",id:"fullName",value:n.fullName,onChange:function(e){var a=e.target,r=a.name,l=a.value;return t(X({},n,Object($.a)({},r,l)))}}),r.a.createElement(y.d,{label:"username",type:"text",name:"username",id:"username",value:n.username,onChange:function(e){var a=e.target,r=a.name,l=a.value;return t(X({},n,Object($.a)({},r,l)))}}),r.a.createElement(y.d,{label:"oldpassword",type:"password",name:"oldPasswordTest",id:"oldPasswordTest",value:n.oldPasswordTest,onChange:function(e){var a=e.target,r=a.name,l=a.value;return t(X({},n,Object($.a)({},r,l)))}}),r.a.createElement(y.d,{label:"new password",type:"password",name:"newPasswordTest",id:"newPasswordTest",value:n.newPasswordTest,onChange:function(e){var a=e.target,r=a.name,l=a.value;return t(X({},n,Object($.a)({},r,l)))}}),r.a.createElement("div",{className:"text-center"},r.a.createElement(y.a,{type:"submit"},"Save"))))))};function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach((function(t){Object($.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne=function(e){var t=e.user._id,a=e.history;console.log(t);var l=Object(n.useState)({fullName:"",username:"",profilePicture:"",oldPasswordTest:"",newPasswordTest:""}),c=Object(v.a)(l,2),s=c[0],o=c[1],i=Object(n.useState)(!1),u=Object(v.a)(i,2),m=(u[0],u[1],Object(n.useState)("")),d=Object(v.a)(m,2),p=d[0],g=d[1];Object(n.useEffect)((function(){h.a.get("/api/userSettings/".concat(t)).then((function(e){var t=e.data,a=t.fullName,n=t.username;o(ae({},s,{fullName:a,username:n}))}))}),[]);return r.a.createElement("div",null,r.a.createElement("h1",{className:" text-center mb-4 logIn"},"Edit your profile"),r.a.createElement(ee,{setUser:o,handleSubmit:function(e){e.preventDefault(),console.log(s),h.a.put("/api/userSettings/".concat(t),s).then((function(){a.push("/content-dashboard")})).catch((function(e){g(e.response.data.message)}))},onImageUpload:function(e){console.log("the file to be added is",e.target.files[0]);var t=e.target.files[0],a=new FormData;a.append("profilePictureTest",t),h.a.post("/api/userSettings/add/image",a).then((function(e){var t=e.data.secure_url;o(ae({},s,{profilePicture:t}))}))},user:s}),r.a.createElement("p",{style:{textAlign:"center"}},p))},re=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user},a.setUser=function(e){a.setState({user:e})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.state.user),r.a.createElement("div",{className:"App"},r.a.createElement(E,{user:this.state.user,setUser:this.setUser}),r.a.createElement(x.c,null," ",r.a.createElement(x.a,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(O,Object.assign({setUser:e.setUser},t))}}),r.a.createElement(x.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(j,Object.assign({setUser:e.setUser},t))}}),r.a.createElement(x.a,{exact:!0,path:"/content-dashboard",render:function(t){return r.a.createElement(N,Object.assign({user:e.state.user},t))}}),r.a.createElement(x.a,{exact:!0,path:"/content",render:function(t){return r.a.createElement(N,Object.assign({user:e.state.user},t))}}),r.a.createElement(x.a,{exact:!0,path:"/content-dashboard/add",component:S}),r.a.createElement(x.a,{exact:!0,path:"/content-dashboard/:unique",component:P}),r.a.createElement(x.a,{exact:!0,path:"/edit/:editPost",component:M}),r.a.createElement(x.a,{exact:!0,path:"/u/:user",component:q}),r.a.createElement(x.a,{exact:!0,path:"/u/:user/:id",component:G}),r.a.createElement(x.a,{exact:!0,path:"/",component:K}),r.a.createElement(x.a,{exact:!0,path:"/chart",render:function(t){return r.a.createElement(z,{user:e.state.user})}}),r.a.createElement(x.a,{exact:!0,path:"/settings",render:function(t){return r.a.createElement(ne,Object.assign({user:e.state.user},t))}})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(249),a(250),a(251);h.a.get("/api/auth/loggedin").then((function(e){var t=e.data;c.a.render(r.a.createElement(d.a,null,r.a.createElement(re,{user:t})),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},37:function(e,t,a){}},[[113,1,2]]]);
//# sourceMappingURL=main.896e90c2.chunk.js.map